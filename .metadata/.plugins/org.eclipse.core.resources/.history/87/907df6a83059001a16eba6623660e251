package icia.project.gabom.service;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.json.JSONArray;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.web.servlet.ModelAndView;

import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.ObjectNode;
import com.google.gson.Gson;

import icia.project.gabom.dao.IAdminDao;

@Service
public class AdminjudgeManagement {
	@Autowired
	private IAdminDao aDao;
	private ModelAndView mav;
	
	public ModelAndView housejudgelist() {
		mav = new ModelAndView();
		List<HashMap<String, String>> hlist = aDao.getHouseList();
		System.out.println("List="+hlist);
		System.out.println("List="+hlist.get(0));
		System.out.println("hlist="+hlist.size());
		int i = 0;
		for(i=0;i<hlist.size();i++) {
			//System.out.println(hlist.get(i).toString());
			System.out.println(hlist.get(i).get("HOUSE_NAME"));
		}
		
		ObjectNode sessionNode =  (ObjectNode) obj.get(JsonAdaptorObject.TYPE.META);
		
		String json = sessionNode.get("quesMapList").asText();
		ObjectMapper MAPPER = new ObjectMapper();
		 
	       
        //""이 붙는 상황에서 고쳤다.
        //astext로 바꾸고 json 형태를 Map List 로 으로 바꿨음
        try {
            System.out.println(">>start");
            hlist = MAPPER.readValue( json , new TypeReference<List<HashMap<String, String>>>() {});
            System.out.println(hlist.get(0).get("qNum"));
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
		
		
		
		
		mav.addObject("housejudge", hlist);
		mav.setViewName("adminmenu");
		return mav;
	} //housejudgelist End
	
	
}//class End
